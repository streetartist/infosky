# InfoSky 浏览器插件使用指南

## 简介

InfoSky 浏览器插件让您可以在浏览网页时快速将知识保存到 InfoSky 知识图谱中。

### 核心功能

- **📥 一键采集** - 点击插件图标，快速保存整个网页到知识库
- **✨ 高亮标注** - 选中文字后出现浮动按钮，直接创建知识节点
- **🔗 自动关联** - 页面加载时自动检测与知识库的关联，侧边栏显示相关知识
- **🖱️ 右键菜单** - 右键选中文字或链接，快速添加到知识库

---

## 安装步骤

### Chrome 浏览器

1. 打开 Chrome 浏览器，访问 `chrome://extensions/`
2. 开启右上角的 **"开发者模式"**
3. 点击 **"加载已解压的扩展程序"**
4. 选择 `d:\Project\infosky\extension` 目录
5. 插件图标将出现在浏览器工具栏中

### Edge 浏览器

1. 打开 Edge 浏览器，访问 `edge://extensions/`
2. 开启左侧的 **"开发人员模式"**
3. 点击 **"加载解压缩的扩展"**
4. 选择 `d:\Project\infosky\extension` 目录
5. 插件图标将出现在浏览器工具栏中

---

## 使用前准备

**确保 InfoSky 后端服务正在运行：**

```bash
cd d:\Project\infosky
.\start-all.bat
```

或分别启动：

```bash
# 终端 1 - 后端
cd server
python -m uvicorn main:app --reload

# 终端 2 - 前端
cd client
npm run dev
```

---

## 功能使用

### 1. 一键采集网页

1. 访问任意网页
2. 点击浏览器工具栏中的 InfoSky 图标
3. 在弹出窗口中，点击 **"保存整页到知识库"**
4. 等待处理完成，显示成功提示

### 2. 选中文字创建节点

1. 在网页上选中一段文字（至少 6 个字符）
2. 选中后会出现紫蓝色渐变的 **"添加到 InfoSky"** 浮动按钮
3. 点击按钮，弹出节点创建面板
4. 可以编辑节点标签和选择类型
5. 点击 **"保存到知识库"** 完成创建

### 3. 查看相关知识

- **自动模式**：页面加载后 2 秒，插件会自动检查知识库中是否有相关内容
- **手动模式**：点击插件图标，选择 **"查找相关知识"**
- 相关知识会在页面右侧边栏显示，点击可跳转到 InfoSky 主应用

### 4. 右键菜单快捷操作

- **选中文字** → 右键 → **"添加到 InfoSky 知识库"**
- **链接上** → 右键 → **"保存链接到 InfoSky"**
- **页面空白处** → 右键 → **"保存此页面到 InfoSky"**

---

## 设置选项

点击插件图标底部的 **"设置"** 链接，可配置：

| 选项 | 说明 |
|------|------|
| API 服务器地址 | InfoSky 后端地址，默认 `http://localhost:8000` |
| 自动检查相关知识 | 页面加载后自动查找关联 |
| 显示选中文字浮动按钮 | 选中文字时显示快速添加按钮 |
| 高亮已保存文本 | 保存后在页面上高亮已添加的文字 |

---

## 常见问题

### Q: 插件显示"未连接"？

**原因**：InfoSky 后端服务未运行

**解决**：
1. 运行 `start-all.bat` 启动服务
2. 确认 `http://localhost:8000` 可以访问

### Q: 右键菜单没有 InfoSky 选项？

**原因**：插件可能需要重新加载

**解决**：
1. 访问 `chrome://extensions/`
2. 找到 InfoSky 插件，点击刷新按钮

### Q: 保存失败？

**原因**：可能是网络问题或后端错误

**解决**：
1. 检查后端控制台是否有错误信息
2. 确认 API 地址设置正确

---

## 技术说明

- **Manifest V3**：使用最新的 Chrome 扩展规范
- **Service Worker**：后台脚本处理 API 通信
- **Content Script**：注入网页，实现文字选中等交互
- **CORS 支持**：后端已配置允许浏览器扩展访问

---

## 更新日志

### v1.0.0 (2024-12-29)
- 🎉 初始版本发布
- ✨ 一键采集网页功能
- ✨ 选中文字创建节点
- ✨ 自动关联相关知识
- ✨ 右键菜单集成
- ⚙️ 设置页面
